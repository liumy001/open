<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	   xmlns:task="http://www.springframework.org/schema/task"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
            http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd">

		<!-- 启用 aspectj 动态代理 -->
		<aop:aspectj-autoproxy proxy-target-class="true" />
		<!-- 支持异步方法执行 -->
		<task:annotation-driven executor="maintenanceExecutor" scheduler="maintenanceScheduler" />
		<task:executor id="maintenanceExecutor" pool-size="20" />
		<task:scheduler id="maintenanceScheduler" pool-size="50" />
		<task:executor id="asyncSaveMonthCleanFollowLogExecutor" pool-size="25" />
		<task:executor id="asyncUpdateServiceAreaExecutor" pool-size="25" />
		<!-- 校验参数 -->
		<bean id="common.messageSource" class="com.ziroom.sms.commons.context.MultipleMessageSource">
			<property name="basenames">
				<list>
					<value>classpath*:message/*</value>
					<value>classpath*:message/*</value>
					<value>classpath*:org/hibernate/validator/ValidationMessages</value>
				</list>
			</property>
			<property name="useCodeAsDefaultMessage" value="false"/>
			<property name="defaultEncoding" value="UTF-8"/>
			<property name="cacheSeconds" value="60"/>
		</bean>

		<bean id="common.validatorFactory" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
			<property name="providerClass" value="org.hibernate.validator.HibernateValidator"/>
			<property name="validationMessageSource" ref="common.messageSource"/>
		</bean>

		<bean id="common.validator" factory-bean="common.validatorFactory" factory-method="getValidator"/>

</beans>
